pkgname=servus-admin
pkgver=0.0.3
pkgrel=1
pkgdesc='servus-admin'
arch=('aarch64')
url='https://github.com/DictumMortuum/servus-admin'
license=(APACHE)
makedepends=(go)
source=("${pkgname}-${pkgver}.tar.gz::${url}/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('SKIP')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  yarn install
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  yarn build
  cd build

  for f in ./*; do
    [[ ! -d $f ]] && install -Dm644 "$f" "$pkgdir"/usr/share/webapps/servus-admin/$f
  done

  for f in ./static/css/*; do
    [[ ! -d $f ]] && install -Dm644 "$f" "$pkgdir"/usr/share/webapps/servus-admin/$f
  done

  for f in ./static/js/*; do
    [[ ! -d $f ]] && install -Dm644 "$f" "$pkgdir"/usr/share/webapps/servus-admin/$f
  done
}
